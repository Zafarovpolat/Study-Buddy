# Lecto ‚Äî –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

> **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-12-12  
> **–°—Ç–∞—Ç—É—Å**: MVP –≥–æ—Ç–æ–≤ (~99%), —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –ø–æ–ª–∏—Ä–æ–≤–∫–∞

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –ì–æ—Ç–æ–≤–æ (Phase 1 ‚Äî MVP)

#### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (PDF, DOCX, TXT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
- [x] OCR –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ Gemini Vision
- [x] AI –æ–±—Ä–∞–±–æ—Ç–∫–∞: Smart Notes, TL;DR, –¢–µ—Å—Ç—ã, –ì–ª–æ—Å—Å–∞—Ä–∏–π, –ö–∞—Ä—Ç–æ—á–∫–∏
- [x] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–µ–º—ã
- [x] –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Ç–µ—Å—Ç—ã —Å –±–∞–ª–ª–∞–º–∏, –∫–∞—Ä—Ç–æ—á–∫–∏ —Å flip)
- [x] Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ WebApp

#### –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
- [x] Free —Ç–∞—Ä–∏—Ñ —Å –ª–∏–º–∏—Ç–æ–º 5 –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤/–¥–µ–Ω—å
- [x] Pro –ø–æ–¥–ø–∏—Å–∫–∞ —á–µ—Ä–µ–∑ Telegram Stars
- [x] –ü–æ–∫–∞–∑ –ª–∏–º–∏—Ç–æ–≤ –∏ Pro-–±–∞–Ω–Ω–µ—Ä

#### –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø
- [x] –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- [x] –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≥—Ä—É–ø–ø—ã
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –≤ –≥—Ä—É–ø–ø—É
- [x] –ü–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö
- [x] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–¥–ª—è owner)
- [x] **Leaderboard –≤ –≥—Ä—É–ø–ø–∞—Ö** (—Ä–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ ü•áü•àü•â)
- [x] –†–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ `/start ref_XXX` ‚Äî –∑–∞—Å—á—ë—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–∞
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ `/start group_XXX` ‚Äî –∞–≤—Ç–æ–≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É
- [x] –í—ã–¥–∞—á–∞ Pro –∑–∞ 5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

#### UI/UX
- [x] –ü–∞–ø–∫–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- [x] Streak —Å–∏—Å—Ç–µ–º–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –≤ Header
- [x] –í–∫–ª–∞–¥–∫–∏ "–õ–∏—á–Ω–æ–µ" / "–ì—Ä—É–ø–ø—ã"
- [x] –ë–∞–Ω–Ω–µ—Ä "–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π"
- [x] –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
- [x] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- [x] **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** (4-step tutorial)

#### Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [x] Streak –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (10:00, 19:00)
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–∞—Ö –≤ –≥—Ä—É–ø–ø–µ
- [x] APScheduler –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á

#### Vector Search (RAG)
- [x] **VectorService** ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ chunks
- [x] **Embeddings** —á–µ—Ä–µ–∑ Gemini text-embedding-004
- [x] **API endpoints**: `/search/ask`, `/search/semantic`, `/search/index/{id}`
- [x] **AskLibrary UI** ‚Äî "–°–ø—Ä–æ—Å–∏ —Å–≤–æ—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É"
- [x] –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è Pro –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [x] –î–µ–ø–ª–æ–π –Ω–∞ Render.com
- [x] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ Supabase PostgreSQL
- [x] Telegram WebHook
- [x] –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ö–æ—Å—Ç–∏–Ω–≥ Frontend —á–µ—Ä–µ–∑ FastAPI
- [x] –ú–∏–≥—Ä–∞—Ü–∏—è —Å ENUM –Ω–∞ VARCHAR (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Supabase)

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

### 1. VectorService ‚Äî –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ö–µ–º—ã –ë–î

**–ü—Ä–æ–±–ª–µ–º–∞**: –í –º–∏–≥—Ä–∞—Ü–∏–∏ `001_initial.py` —Ç–∞–±–ª–∏—Ü–∞ `text_chunks` –Ω–µ –∏–º–µ–µ—Ç –∫–æ–ª–æ–Ω–∫–∏ `user_id`, –Ω–æ `VectorService.index_material()` –ø—ã—Ç–∞–µ—Ç—Å—è –µ—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.

```python
# vector_service.py —Å—Ç—Ä–æ–∫–∞ 95
INSERT INTO text_chunks (material_id, user_id, content, ...)
```

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É `user_id` –≤ –º–∏–≥—Ä–∞—Ü–∏—é –∏–ª–∏ —É–±—Ä–∞—Ç—å –∏–∑ VectorService.

### 2. Vector embedding storage

**–ü—Ä–æ–±–ª–µ–º–∞**: VectorService –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `::vector` cast (pgvector extension), –Ω–æ –º–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞—ë—Ç `ARRAY(Float)`.

**–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è**:
- A) –í–∫–ª—é—á–∏—Ç—å pgvector extension –≤ Supabase
- B) –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ARRAY(Float) –±–µ–∑ pgvector (–º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω–æ –ø—Ä–æ—â–µ)

---

## ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Phase 2 ‚Äî –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|-----------|--------|
| **AI Debate** | –ß–∞—Ç —Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–º, 2 —Ä–µ–∂–∏–º–∞ (–ø–æ–º–æ—â–Ω–∏–∫/—Å–∫–µ–ø—Ç–∏–∫) | üî¥ –í—ã—Å–æ–∫–∞—è | 3-5 –¥–Ω–µ–π |
| **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π** | AI —Å–æ–∑–¥–∞—ë—Ç —Å–ª–∞–π–¥—ã –∏–∑ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | üî¥ –í—ã—Å–æ–∫–∞—è | 3-4 –¥–Ω—è |
| **–ê—É–¥–∏–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** | –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Whisper | üî¥ –í—ã—Å–æ–∫–∞—è | 4-5 –¥–Ω–µ–π |
| **Neuro-Lexicon** | –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ (SM-2 –∞–ª–≥–æ—Ä–∏—Ç–º) | üî¥ –í—ã—Å–æ–∫–∞—è | 4-5 –¥–Ω–µ–π |

---

## üìã –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏

### –°—Ä–æ—á–Ω–æ (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)
1. [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å `text_chunks` —Ç–∞–±–ª–∏—Ü—É ‚Äî –¥–æ–±–∞–≤–∏—Ç—å `user_id` –∫–æ–ª–æ–Ω–∫—É
2. [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É VectorService —Å Supabase
3. [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

### –ù–µ–¥–µ–ª—è 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
4. [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
5. [ ] E2E —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
6. [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry)

### –ù–µ–¥–µ–ª—è 2: Phase 2 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
7. [ ] AI Debate (—á–∞—Ç —Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–º)
8. [ ] –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–π

---

## üí∞ –û—Ü–µ–Ω–∫–∞ –∑–∞—Ç—Ä–∞—Ç

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–º–µ—Å—è—Ü)
| –°–µ—Ä–≤–∏—Å | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|--------|---------------|-----------|
| **Render.com** (Backend) | Web Service, 512 MB RAM | $7-25 |
| **Supabase** (PostgreSQL) | Free tier (500 MB) | Free ‚Üí $25/–º–µ—Å |
| **Gemini API** | ~0.01$/1K tokens | ~$5-15/–º–µ—Å |
| **Telegram Bot** | WebHook, –±–µ—Å–ø–ª–∞—Ç–Ω–æ | Free |
| **–ò—Ç–æ–≥–æ** | | **~$12-50/–º–µ—Å—è—Ü** |

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Gemini API rate limits** ‚Äî –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –≤–æ–∑–º–æ–∂–Ω—ã 429 –æ—à–∏–±–∫–∏
2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤** ‚Äî –º–∞–∫—Å–∏–º—É–º 20 MB
3. **–§–æ—Ä–º–∞—Ç .doc** ‚Äî –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ .docx
4. **–ì—Ä—É–ø–ø—ã** ‚Äî –º–∞–∫—Å–∏–º—É–º 50 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

---

## üìù Changelog

### 2025-12-12
- ‚úÖ Vector Search (RAG) ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ Leaderboard –≤ –≥—Ä—É–ø–ø–∞—Ö ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π ‚Äî —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- ‚úÖ AskLibrary UI ‚Äî "–°–ø—Ä–æ—Å–∏ —Å–≤–æ—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É"
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ VARCHAR –≤–º–µ—Å—Ç–æ ENUM
- ‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: text_chunks.user_id –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ –º–∏–≥—Ä–∞—Ü–∏–∏

### 2025-12-11
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (streak + –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –Ω–∞ Supabase PostgreSQL

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤—Å–µ–≥–æ –º–∏—Ä–∞**