# Study Buddy - –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

> **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-12-08

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Backend (`/backend`)
**–°—Ç–µ–∫**: FastAPI + PostgreSQL + SQLAlchemy + Gemini AI

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------|----------|
| Entry Point | `app/main.py` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è FastAPI, WebSocket, –ë–î, Telegram webhook |
| API Routes | `app/api/routes/` | users, materials, folders, groups, processing, outputs |
| Bot | `app/bot/handlers.py` | –ö–æ–º–∞–Ω–¥—ã /start, /pro, /invite, /stats + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–µ–π |
| Models | `app/models/` | User, Material, Folder, GroupMember, AIOutput |
| Services | `app/services/` | AI, Payment, Processing, TextExtractor, User, Group, Material, Folder |
| Config | `app/core/config.py` | –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è |

### Frontend (`/frontend`)
**–°—Ç–µ–∫**: React + TypeScript + Vite + Tailwind CSS

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ü—É—Ç—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----------|------|----------|
| Entry | `src/main.tsx` | React entry point |
| Router | `src/App.tsx` | –†–æ—É—Ç–∏–Ω–≥: HomePage, MaterialPage |
| Pages | `src/pages/` | HomePage, MaterialPage |
| Components | `src/components/` | Header, MaterialCard, UploadModal, OutputViewer, GroupsTab, InviteBanner |
| API Client | `src/lib/api.ts` | Axios client —Å–æ –≤—Å–µ–º–∏ endpoints |
| Telegram | `src/lib/telegram.ts` | WebApp SDK –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| State | `src/store/useStore.ts` | Zustand store |

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –ó–∞–≥—Ä—É–∑–∫–∞ PDF | `materials.py` | `UploadModal` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ó–∞–≥—Ä—É–∑–∫–∞ DOCX | `materials.py` | `UploadModal` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ó–∞–≥—Ä—É–∑–∫–∞ TXT | `materials.py` | `UploadModal` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (OCR) | `text_extractor.py` | `UploadModal` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | `materials.py` | `UploadModal` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 2. AI –û–±—Ä–∞–±–æ—Ç–∫–∞ (Gemini 2.0 Flash)
| –§—É–Ω–∫—Ü–∏—è | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|---------|------|--------|
| Smart Notes (–∫–æ–Ω—Å–ø–µ–∫—Ç) | `ai_service.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| TL;DR (–∫—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ) | `ai_service.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Quiz (—Ç–µ—Å—Ç—ã) | `ai_service.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Glossary (–≥–ª–æ—Å—Å–∞—Ä–∏–π) | `ai_service.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Flashcards (–∫–∞—Ä—Ç–æ—á–∫–∏) | `ai_service.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| OCR –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π | `text_extractor.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|-----------|----------|--------|
| MarkdownViewer | –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| QuizViewer | –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å –ø–æ–¥—Å—á—ë—Ç–æ–º –±–∞–ª–ª–æ–≤ | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| GlossaryViewer | –†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–µ—Å—è —Ç–µ—Ä–º–∏–Ω—ã | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| FlashcardsViewer | –ö–∞—Ä—Ç–æ—á–∫–∏ —Å flip-–∞–Ω–∏–º–∞—Ü–∏–µ–π | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 4. Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
| –§—É–Ω–∫—Ü–∏—è | –§–∞–π–ª | –°—Ç–∞—Ç—É—Å |
|---------|------|--------|
| WebApp Init Data | `deps.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ /start | `handlers.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Dev-—Ä–µ–∂–∏–º —Å X-User-ID | `deps.py` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 5. –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è
| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| Free —Ç–∞—Ä–∏—Ñ (3/–¥–µ–Ω—å) | `user_service.py` | `HomePage` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Pro –ø–æ–¥–ø–∏—Å–∫–∞ | `user.py`, `payment_service.py` | `Header` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| Telegram Stars –æ–ø–ª–∞—Ç–∞ | `handlers.py`, `payment_service.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ü–æ–∫–∞–∑ –ª–∏–º–∏—Ç–æ–≤ | `users.py` | `HomePage` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 6. –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –ì—Ä—É–ø–ø—ã
| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã | `group_service.py`, `groups.py` | `GroupsTab` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É | `group_service.py`, `groups.py` | `GroupsTab` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≥—Ä—É–ø–ø—ã | `materials.py` | `GroupsTab` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≥—Ä—É–ø–ø—É | `materials.py` | `UploadModal` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ invite-–∫–æ–¥–∞ | ‚Äî | `GroupsTab` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –í—ã—Ö–æ–¥ –∏–∑ –≥—Ä—É–ø–ø—ã | `group_service.py` | `GroupsTab` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã (owner) | `group_service.py` | `GroupsTab` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 7. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ. –∫–æ–¥–∞ | `group_service.py`, `user.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ | `group_service.py` | `InviteBanner` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | `group_service.py` | `InviteBanner` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ/Share —Å—Å—ã–ª–∫–∏ | ‚Äî | `InviteBanner` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ö–æ–º–∞–Ω–¥–∞ /invite | `handlers.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ `/start ref_XXX`** | `handlers.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –í—ã–¥–∞—á–∞ Pro –∑–∞ 5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | `group_service.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 8. Streak —Å–∏—Å—Ç–µ–º–∞
| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –¢—Ä–µ–∫–∏–Ω–≥ streak | `user_service.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Header | `users.py` | `Header` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ö–æ–º–∞–Ω–¥–∞ /stats | `handlers.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |

### 9. –ù–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø–∞–ø–∫–∏
| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞–ø–æ–∫ | `folder_service.py` | ‚Äî | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –ø–∞–ø–∫–∞–º | `folders.py` | `HomePage` | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" | ‚Äî | `HomePage` | ‚úÖ –ì–æ—Ç–æ–≤–æ |

---

## ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### üî¥ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---------|----------|-----------|
| **Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** | Streak reminders, –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –≥—Ä—É–ø–ø–µ | üü° –°—Ä–µ–¥–Ω—è—è |
| **–í—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ** | Dropdown –≤ UploadModal –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥—Ä—É–ø–ø—ã | üü¢ –ù–∏–∑–∫–∞—è |

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---------|----------|-----------|
| –ü–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º | Full-text search –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ | üü° –°—Ä–µ–¥–Ω—è—è |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | Rename, move to folder | üü¢ –ù–∏–∑–∫–∞—è |
| –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | –¢—É—Ç–æ—Ä–∏–∞–ª –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ | üü° –°—Ä–µ–¥–Ω—è—è |

### üîµ –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (Phase 2)

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|---------|----------|-----------|
| AI Debate | –ß–∞—Ç —Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–º (Skeptic Professor) | üî¥ –í—ã—Å–æ–∫–∞—è |
| Neuro-Lexicon | –°–ª–æ–≤–∞—Ä—å + –∏–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ | üî¥ –í—ã—Å–æ–∫–∞—è |
| Vector Search (RAG) | pgvector + "–°–ø—Ä–æ—Å–∏ —Å–≤–æ—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É" | üî¥ –í—ã—Å–æ–∫–∞—è |
| –ê—É–¥–∏–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã | Whisper —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è | üî¥ –í—ã—Å–æ–∫–∞—è |
| Leaderboard –≤ –≥—Ä—É–ø–ø–∞—Ö | –†–µ–π—Ç–∏–Ω–≥ –ø–æ —Ç–µ—Å—Ç–∞–º | üü° –°—Ä–µ–¥–Ω—è—è |

---

## üìä –°—Ç–∞—Ç—É—Å –ø–æ –º–æ–¥—É–ª—è–º

```
Backend
‚îú‚îÄ‚îÄ Users          ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ Materials      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%  
‚îú‚îÄ‚îÄ Folders        ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ Groups         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ Referrals      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ Payments       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ AI Processing  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ Text Extract   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îî‚îÄ‚îÄ Bot Handlers   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%

Frontend
‚îú‚îÄ‚îÄ HomePage       ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ MaterialPage   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ UploadModal    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë  90% (–≤—ã–±–æ—Ä –≥—Ä—É–ø–ø—ã)
‚îú‚îÄ‚îÄ GroupsTab      ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ InviteBanner   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îú‚îÄ‚îÄ OutputViewer   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%
‚îî‚îÄ‚îÄ Header         ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100%

–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: ~95%
```

---

## üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `/start ref_XXX` (–∑–∞—Å—á—ë—Ç —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –≥—Ä—É–ø–ø—É
- ‚úÖ InviteBanner —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã /invite –∏ /stats –≤ –±–æ—Ç–µ
- ‚úÖ –í—ã–¥–∞—á–∞ Pro –∑–∞ 5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|------------|
| Frontend | React 18 + TypeScript + Vite |
| Styling | Tailwind CSS |
| State | Zustand |
| Backend | Python 3.11 + FastAPI |
| ORM | SQLAlchemy (async) |
| Database | PostgreSQL |
| AI | Google Gemini 2.0 Flash |
| Bot | python-telegram-bot |
| Deploy | Render.com |
