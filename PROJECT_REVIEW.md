# Lecto - –ü–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å

> **–û–±–Ω–æ–≤–ª–µ–Ω–æ**: 2025-12-11  
> **–°—Ç–∞—Ç—É—Å**: MVP ~97% –≥–æ—Ç–æ–≤. –î–µ–ø–ª–æ–π –Ω–∞ Render.com + Supabase PostgreSQL  
> **–í–µ—Ä—Å–∏—è**: 0.1.0-beta

---

## üìä –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**Lecto** ‚Äî Telegram Mini App –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —É—á—ë–±—ã —Å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º. –ó–∞–≥—Ä—É–∂–∞–π –º–∞—Ç–µ—Ä–∏–∞–ª—ã (PDF, DOCX, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è) ‚Äî –ø–æ–ª—É—á–∞–π —É–º–Ω—ã–µ –∫–æ–Ω—Å–ø–µ–∫—Ç—ã, —Ç–µ—Å—Ç—ã, –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –≥–ª–æ—Å—Å–∞—Ä–∏–π.

### –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **Backend**: Python 3.11 + FastAPI + SQLAlchemy 2.0 (async)
- **Frontend**: React 18 + TypeScript + Vite + Tailwind CSS
- **Database**: PostgreSQL (Supabase) - AWS ap-south-1 (Mumbai), Session Pooler port 5432
- **AI**: Google Gemini 2.0 Flash
- **Bot**: python-telegram-bot
- **Deploy**: Render.com (Backend + Static Frontend)

---

## üìÇ –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Backend (`/backend`)

```
backend/
‚îú‚îÄ‚îÄ alembic/                          # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ env.py                        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îÇ   ‚îî‚îÄ‚îÄ versions/
‚îÇ       ‚îî‚îÄ‚îÄ 001_initial.py            # –ù–∞—á–∞–ª—å–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ main.py                       # üöÄ Entry point: FastAPI app, WebHook, Scheduler
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ config.py                 # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ models/                       # SQLAlchemy –º–æ–¥–µ–ª–∏ (async)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py                   # AsyncEngine, SessionLocal, Base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py                   # User: –ø–æ–¥–ø–∏—Å–∫–∞, streak, —Ä–µ—Ñ–µ—Ä–∞–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ material.py               # Material: —Ñ–∞–π–ª—ã, OCR, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ folder.py                 # Folder: –ø–∞–ø–∫–∏ + –≥—Ä—É–ø–ø—ã (is_group=True)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ group_member.py           # GroupMember: —É—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø (—Ä–æ–ª–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_output.py              # AIOutput: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã AI –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ quiz_result.py            # QuizResult: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ deps.py                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: get_db, get_current_user
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schemas.py                # Pydantic —Å—Ö–µ–º—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ routes/                   # API endpoints
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ __init__.py           # api_router (–æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ —Ä–æ—É—Ç—ã)
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ users.py              # GET /me, /me/limits, /me/streak
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ materials.py          # CRUD –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, upload, scan, search
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ folders.py            # CRUD –ø–∞–ø–æ–∫
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ groups.py             # CRUD –≥—Ä—É–ø–ø, –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, quiz results
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ processing.py         # POST /process, /regenerate, GET /status
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ outputs.py            # GET outputs –ø–æ material_id
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ services/                     # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py               # –≠–∫—Å–ø–æ—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user_service.py           # –°–æ–∑–¥–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, streak, –ª–∏–º–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ material_service.py       # CRUD –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ folder_service.py         # CRUD –ø–∞–ø–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ group_service.py          # –ì—Ä—É–ø–ø—ã, –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, —Ä–µ—Ñ–µ—Ä–∞–ª—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai_service.py             # Gemini API: prompts, –≤—ã–∑–æ–≤—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ processing_service.py     # –û–±—Ä–∞–±–æ—Ç–∫–∞: –∫–æ–Ω—Å–ø–µ–∫—Ç, —Ç–µ—Å—Ç—ã, –≥–ª–æ—Å—Å–∞—Ä–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ text_extractor.py         # –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞: PDF, DOCX, OCR
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ payment_service.py        # Telegram Stars, –ø–æ–¥–ø–∏—Å–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notification_service.py   # Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ scheduler.py              # APScheduler: streak –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ bot/
‚îÇ       ‚îú‚îÄ‚îÄ bot.py                    # –°–æ–∑–¥–∞–Ω–∏–µ Telegram bot app
‚îÇ       ‚îî‚îÄ‚îÄ handlers.py               # –ö–æ–º–∞–Ω–¥—ã: /start, /pro, /stats, /invite
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ reset_db.py                       # –°–∫—Ä–∏–ø—Ç —Å–±—Ä–æ—Å–∞ –ë–î
‚îî‚îÄ‚îÄ run_bot.py                        # –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ –≤ polling —Ä–µ–∂–∏–º–µ (dev)
```

### Frontend (`/frontend`)

```
frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx                      # React entry point
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx                       # Router (React Router)
‚îÇ   ‚îú‚îÄ‚îÄ index.css                     # Global styles + Tailwind
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ pages/                        # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomePage.tsx              # –ì–ª–∞–≤–Ω–∞—è: –≤–∫–ª–∞–¥–∫–∏ "–õ–∏—á–Ω–æ–µ/–ì—Ä—É–ø–ø—ã", –ø–æ–∏—Å–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MaterialPage.tsx          # –î–µ—Ç–∞–ª—å –º–∞—Ç–µ—Ä–∏–∞–ª–∞ + AI outputs
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GroupResultsPage.tsx      # –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–¥–ª—è owner)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header.tsx                # –•–µ–¥–µ—Ä: streak, –±–∞–ª–∞–Ω—Å, –ø–æ–∏—Å–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MaterialCard.tsx          # –ö–∞—Ä—Ç–æ—á–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MaterialActions.tsx       # –î–µ–π—Å—Ç–≤–∏—è: —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —É–¥–∞–ª–∏—Ç—å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UploadModal.tsx           # –ú–æ–¥–∞–ª–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏: —Ñ–∞–π–ª/—Ç–µ–∫—Å—Ç/—Ç–µ–º–∞/—Å–∫–∞–Ω
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OutputViewer.tsx          # –ü—Ä–æ—Å–º–æ—Ç—Ä AI: –∫–æ–Ω—Å–ø–µ–∫—Ç, —Ç–µ—Å—Ç, –∫–∞—Ä—Ç–æ—á–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GroupsTab.tsx             # –í–∫–ª–∞–¥–∫–∞ "–ì—Ä—É–ø–ø—ã": —Å–æ–∑–¥–∞–Ω–∏–µ, –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InviteBanner.tsx          # –ë–∞–Ω–Ω–µ—Ä "–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–∑–µ–π"
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/                       # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ index.ts              # –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö UI
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Card.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Input.tsx
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ Textarea.tsx
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ Spinner.tsx
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.ts                    # Axios –∫–ª–∏–µ–Ω—Ç: –≤—Å–µ API –º–µ—Ç–æ–¥—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ telegram.ts               # Telegram WebApp SDK wrapper
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ store/
‚îÇ       ‚îî‚îÄ‚îÄ useStore.ts               # Zustand: user, currentFolder, searchQuery
‚îÇ
‚îú‚îÄ‚îÄ package.json                      # npm dependencies
‚îú‚îÄ‚îÄ vite.config.ts                    # Vite config
‚îî‚îÄ‚îÄ tailwind.config.js                # Tailwind config
```

---

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤

| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –ó–∞–≥—Ä—É–∑–∫–∞ PDF/DOCX/TXT | `POST /materials/upload` | `UploadModal.tsx` | ‚úÖ |
| –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (OCR) | `text_extractor.py` + Gemini Vision | `UploadModal.tsx` | ‚úÖ |
| –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞–º–µ—Ä–æ–π | `POST /materials/scan` | `UploadModal.tsx` | ‚úÖ |
| –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | `POST /materials/text` | `UploadModal.tsx` | ‚úÖ |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–µ–º—ã | `POST /materials/generate-from-topic` | `UploadModal.tsx` | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- `text_extractor.py`: PyPDF2 –¥–ª—è PDF, python-docx –¥–ª—è DOCX, Gemini Vision –¥–ª—è OCR
- –ú–∞–∫—Å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 20 MB
- –ê–≤—Ç–æ-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ (–æ–ø—Ü–∏—è `auto_process=true`)

---

### 2. AI –û–±—Ä–∞–±–æ—Ç–∫–∞ (Gemini 2.0 Flash)

| –§–æ—Ä–º–∞—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | Endpoint | –°—Ç–∞—Ç—É—Å |
|--------|----------|----------|--------|
| `smart_notes` | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç | `POST /processing/material/{id}` | ‚úÖ |
| `tldr` | –ö—Ä–∞—Ç–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ | `POST /processing/material/{id}` | ‚úÖ |
| `quiz` | 15-20 –≤–æ–ø—Ä–æ—Å–æ–≤ (3 —É—Ä–æ–≤–Ω—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏) | `POST /processing/material/{id}` | ‚úÖ |
| `glossary` | –ì–ª–æ—Å—Å–∞—Ä–∏–π –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤ | `POST /processing/material/{id}` | ‚úÖ |
| `flashcards` | –ö–∞—Ä—Ç–æ—á–∫–∏ "–≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç" | `POST /processing/material/{id}` | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- `processing_service.py`: –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- JSON —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è quiz, glossary, flashcards
- Markdown –¥–ª—è smart_notes –∏ tldr
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è: `POST /processing/material/{id}/regenerate/{format}`

---

### 3. –ü—Ä–æ—Å–º–æ—Ç—Ä AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª | –§–∞–π–ª |
|-----------|------------|------|
| MarkdownViewer | –†–µ–Ω–¥–µ—Ä Markdown —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –∫–æ–¥–∞ | `OutputViewer.tsx` | ‚úÖ |
| QuizViewer | –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞ —Å –±–∞–ª–ª–∞–º–∏, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | `OutputViewer.tsx` | ‚úÖ |
| GlossaryViewer | –†–∞—Å–∫—Ä—ã–≤–∞—é—â–∏–π—Å—è —Å–ø–∏—Å–æ–∫ —Ç–µ—Ä–º–∏–Ω–æ–≤ | `OutputViewer.tsx` | ‚úÖ |
| FlashcardsViewer | Flip-–∫–∞—Ä—Ç–æ—á–∫–∏, –æ—Ç–º–µ—Ç–∫–∞ "–∑–Ω–∞—é" | `OutputViewer.tsx` | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- QuizViewer: –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤ –≥—Ä—É–ø–ø–µ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞
- FlashcardsViewer: –ª–æ–∫–∞–ª—å–Ω—ã–π state –¥–ª—è "–≤—ã—É—á–µ–Ω–Ω—ã—Ö" –∫–∞—Ä—Ç–æ—á–µ–∫
- –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª—é–±–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∫–Ω–æ–ø–∫–æ–π "–û–±–Ω–æ–≤–∏—Ç—å"

---

### 4. Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

| –§—É–Ω–∫—Ü–∏—è | –†–µ–∞–ª–∏–∑–∞—Ü–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|------------|--------|
| WebApp Init Data | `telegram.ts` ‚Üí –∑–∞–≥–æ–ª–æ–≤–æ–∫ `X-Telegram-Init-Data` | ‚úÖ |
| Dev-—Ä–µ–∂–∏–º | –ó–∞–≥–æ–ª–æ–≤–æ–∫ `X-User-ID` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ | ‚úÖ |
| –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `/start` ‚Üí `UserService.get_or_create()` | ‚úÖ |
| Deep Links | `/start ref_XXX` ‚Äî —Ä–µ—Ñ–µ—Ä–∞–ª, `/start group_XXX` ‚Äî –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- `deps.py`: `get_current_user()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç Init Data –∏–ª–∏ X-User-ID
- –ê–≤—Ç–æ—Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

---

### 5. –ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è

| –§—É–Ω–∫—Ü–∏—è | Backend | Telegram | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| Free —Ç–∞—Ä–∏—Ñ (3/–¥–µ–Ω—å) | `user_service.check_rate_limit()` | ‚úÖ | ‚úÖ |
| Pro –ø–æ–¥–ø–∏—Å–∫–∞ | `SubscriptionTier.PRO` –≤ –º–æ–¥–µ–ª–∏ User | ‚úÖ | ‚úÖ |
| Telegram Stars –æ–ø–ª–∞—Ç–∞ | `payment_service.py` + bot handlers | ‚úÖ | ‚úÖ |
| –ü–æ–∫–∞–∑ –ª–∏–º–∏—Ç–æ–≤ | `GET /users/me/limits` | `Header.tsx` | ‚úÖ |
| Pro –∑–∞ 5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | `group_service._grant_referral_pro()` | ‚úÖ | ‚úÖ |

**–¶–µ–Ω—ã** (–≤ `payment_service.py`):
- 1 –º–µ—Å—è—Ü: 150 ‚≠ê
- 1 –≥–æ–¥: 1200 ‚≠ê (—Å–∫–∏–¥–∫–∞ -33%)

---

### 6. –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –ì—Ä—É–ø–ø—ã

| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã | `POST /groups/` | `GroupsTab.tsx` | ‚úÖ |
| –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É | `POST /groups/join` | `GroupsTab.tsx` | ‚úÖ |
| –ê–≤—Ç–æ–≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ | `/start group_XXX` ‚Üí `handlers.py` | ‚úÖ | ‚úÖ |
| –ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≥—Ä—É–ø–ø—ã | `GET /materials/group/{id}` | `GroupsTab.tsx` | ‚úÖ |
| –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –≥—Ä—É–ø–ø—É | `UploadModal` ‚Üí `group_id` –ø–∞—Ä–∞–º–µ—Ç—Ä | `UploadModal.tsx` | ‚úÖ |
| –ü–æ–∏—Å–∫ –≤ –≥—Ä—É–ø–ø–µ | –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –ø–æ title | `GroupsTab.tsx` | ‚úÖ |
| –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ –≥—Ä—É–ø–ø–µ | –ü–æ –¥–∞—Ç–µ, –Ω–∞–∑–≤–∞–Ω–∏—é | `GroupsTab.tsx` | ‚úÖ |
| –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (owner) | `GET /groups/{id}/quiz-results` | `GroupResultsPage.tsx` | ‚úÖ |
| –í—ã—Ö–æ–¥ –∏–∑ –≥—Ä—É–ø–ø—ã | `POST /groups/{id}/leave` | `GroupsTab.tsx` | ‚úÖ |
| –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã | `DELETE /groups/{id}` | `GroupsTab.tsx` | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- `Folder.is_group = True` ‚Äî –ø–∞–ø–∫–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≥—Ä—É–ø–ø–æ–π
- `GroupMember`: —Ä–æ–ª–∏ (owner, admin, member)
- Invite code: 6 —Å–∏–º–≤–æ–ª–æ–≤ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤ `folder.py`)
- –ú–∞–∫—Å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: 50 (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

---

### 7. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞

| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ñ. –∫–æ–¥–∞ | `User.generate_referral_code()` | ‚úÖ | ‚úÖ |
| –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ | `https://t.me/bot?start=ref_CODE` | `/invite` –∫–æ–º–∞–Ω–¥–∞ | ‚úÖ |
| –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | `GET /groups/referral/stats` | `InviteBanner.tsx` | ‚úÖ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ `/start ref_XXX` | `handlers.start_command()` | ‚úÖ | ‚úÖ |
| –í—ã–¥–∞—á–∞ Pro –∑–∞ 5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ | `group_service._grant_referral_pro()` | ‚úÖ | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- –†–µ—Ñ. –∫–æ–¥: 6 —Å–∏–º–≤–æ–ª–æ–≤ (uppercase)
- –ü–æ—Ä–æ–≥: 5 —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ = 30 –¥–Ω–µ–π Pro
- –ü–æ—Å–ª–µ –ø–æ—Ä–æ–≥–∞ Pro –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å

---

### 8. Streak —Å–∏—Å—Ç–µ–º–∞

| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –¢—Ä–µ–∫–∏–Ω–≥ streak | `user_service.update_streak()` | –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | ‚úÖ |
| –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Header | `GET /users/me/streak` | `Header.tsx` | ‚úÖ |
| –ö–æ–º–∞–Ω–¥–∞ `/stats` | `handlers.stats_command()` | ‚úÖ | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- `current_streak`, `longest_streak` –≤ –º–æ–¥–µ–ª–∏ User
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞
- –°–±—Ä–æ—Å –µ—Å–ª–∏ –Ω–µ –∑–∞—Ö–æ–¥–∏–ª 2+ –¥–Ω—è

---

### 9. –ü–æ–∏—Å–∫ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è

| –§—É–Ω–∫—Ü–∏—è | Backend | Frontend | –°—Ç–∞—Ç—É—Å |
|---------|---------|----------|--------|
| –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ | `GET /materials/search/all?q=query` | `HomePage.tsx` | ‚úÖ |
| –ü–æ–∏—Å–∫ –≤ –≥—Ä—É–ø–ø–µ | –õ–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä | `GroupsTab.tsx` | ‚úÖ |
| –ü–∞–ø–∫–∏ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è | `GET /folders/`, `folder_id` –ø–∞—Ä–∞–º–µ—Ç—Ä | `HomePage.tsx` | ‚úÖ |
| –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | `PATCH /materials/{id}` | `MaterialActions.tsx` | ‚úÖ |
| –£–¥–∞–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ | `DELETE /materials/{id}` | `MaterialActions.tsx` | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫: ILIKE –ø–æ `title` –∏ `extracted_text`
- Breadcrumbs –Ω–∞–≤–∏–≥–∞—Ü–∏—è –≤ HomePage
- –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤ –ø–∞–ø–∫—É / –∫–æ—Ä–µ–Ω—å

---

### 10. Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è | Backend | –°—Ç–∞—Ç—É—Å |
|---------|---------|--------|
| Streak –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è (10:00, 19:00) | `scheduler.py` + `notification_service.py` | ‚úÖ |
| –ù–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –≥—Ä—É–ø–ø–µ | `notification_service.notify_group_members()` | ‚úÖ |
| APScheduler | `scheduler.start_scheduler()` –≤ `main.py` | ‚úÖ |
| Test endpoint | `POST /materials/test-notification` (dev) | ‚úÖ |

**–î–µ—Ç–∞–ª–∏**:
- Scheduler –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Cron: `0 10 * * *`, `0 19 * * *`
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ —Ç–µ–º, —É –∫–æ–≥–æ streak > 0

---

## ‚ùå –ù–ï —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≤ –ø–ª–∞–Ω–∞—Ö)

### üü° –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|-----------|--------|
| **–û–Ω–±–æ—Ä–¥–∏–Ω–≥** | –¢—É—Ç–æ—Ä–∏–∞–ª –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ | üü° –°—Ä–µ–¥–Ω—è—è | 1 –¥–µ–Ω—å |
| **Leaderboard** | –ü—É–±–ª–∏—á–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –≥—Ä—É–ø–ø –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Ç–µ—Å—Ç–æ–≤ | üü° –°—Ä–µ–¥–Ω—è—è | 1 –¥–µ–Ω—å |

> **–ó–∞–º–µ—á–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ QuizResult. Leaderboard —Ç—Ä–µ–±—É–µ—Ç –ª–∏—à—å –¥–æ–±–∞–≤–∏—Ç—å endpoint –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç.

### üîµ Phase 2 (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –û—Ü–µ–Ω–∫–∞ |
|---------|----------|-----------|--------|
| **AI Debate** | –ß–∞—Ç —Å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–º, 2 —Ä–µ–∂–∏–º–∞ (–ø–æ–º–æ—â–Ω–∏–∫/—Å–∫–µ–ø—Ç–∏–∫) | üî¥ –í—ã—Å–æ–∫–∞—è | 3-5 –¥–Ω–µ–π |
| **Vector Search (RAG)** | "–°–ø—Ä–æ—Å–∏ —Å–≤–æ—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É" ‚Äî –ø–æ–∏—Å–∫ –ø–æ embeddings | üî¥ –í—ã—Å–æ–∫–∞—è | 3-4 –¥–Ω—è |
| **–ê—É–¥–∏–æ –º–∞—Ç–µ—Ä–∏–∞–ª—ã** | –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ/–≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ Whisper | üî¥ –í—ã—Å–æ–∫–∞—è | 4-5 –¥–Ω–µ–π |
| **Neuro-Lexicon** | –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–µ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ (SM-2 –∞–ª–≥–æ—Ä–∏—Ç–º) | üî¥ –í—ã—Å–æ–∫–∞—è | 4-5 –¥–Ω–µ–π |

---

## üìä –°—Ç–∞—Ç—É—Å –ø–æ –º–æ–¥—É–ª—è–º

```
Backend
‚îú‚îÄ‚îÄ Users ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –ø–æ–¥–ø–∏—Å–∫–∞, streak, —Ä–µ—Ñ–µ—Ä–∞–ª—ã
‚îú‚îÄ‚îÄ Materials ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî CRUD, upload, scan, generate
‚îú‚îÄ‚îÄ Folders ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî CRUD, –Ω–∞–≤–∏–≥–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Groups ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, quiz results
‚îú‚îÄ‚îÄ Referrals ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞, —Ç—Ä–µ–∫–∏–Ω–≥, Pro –∑–∞ 5
‚îú‚îÄ‚îÄ Payments ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî Telegram Stars, invoice, –æ–±—Ä–∞–±–æ—Ç–∫–∞
‚îú‚îÄ‚îÄ AI Processing ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî 5 —Ñ–æ—Ä–º–∞—Ç–æ–≤, —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Text Extract ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî PDF, DOCX, OCR (Gemini Vision)
‚îú‚îÄ‚îÄ Bot Handlers ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî /start, /pro, /stats, /invite
‚îú‚îÄ‚îÄ Notifications ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî streak, –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –≥—Ä—É–ø–ø–µ
‚îî‚îÄ‚îÄ Scheduler ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî APScheduler, cron –∑–∞–¥–∞—á–∏

Frontend
‚îú‚îÄ‚îÄ HomePage ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî –≤–∫–ª–∞–¥–∫–∏, search, breadcrumbs
‚îú‚îÄ‚îÄ MaterialPage ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî –¥–µ—Ç–∞–ª—å + AI outputs
‚îú‚îÄ‚îÄ UploadModal ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî 5 —Å–ø–æ—Å–æ–±–æ–≤ –∑–∞–≥—Ä—É–∑–∫–∏
‚îú‚îÄ‚îÄ GroupsTab ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ, –≤—Å—Ç—É–ø–ª–µ–Ω–∏–µ, —Å–ø–∏—Å–æ–∫
‚îú‚îÄ‚îÄ GroupResults ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (owner only)
‚îú‚îÄ‚îÄ InviteBanner ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî —Ä–µ—Ñ. —Å—Å—ã–ª–∫–∞ + –ø—Ä–æ–≥—Ä–µ—Å—Å
‚îú‚îÄ‚îÄ OutputViewer ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî 5 —Ñ–æ—Ä–º–∞—Ç–æ–≤ + —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Search ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π + –ª–æ–∫–∞–ª—å–Ω—ã–π –≤ –≥—Ä—É–ø–ø–∞—Ö
‚îî‚îÄ‚îÄ Header ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 100% ‚Äî streak, –±–∞–ª–∞–Ω—Å, Pro

–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å: ~97%
```

---

## üîÑ –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–¥–µ–∫–∞–±—Ä—å 2025)

- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º (`/materials/search/all`)
- ‚úÖ –ü–æ–∏—Å–∫ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø (–ª–æ–∫–∞–ª—å–Ω–æ)
- ‚úÖ Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (streak + –Ω–æ–≤—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã)
- ‚úÖ APScheduler –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø–∞—Ö (owner view)
- ‚úÖ –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∞ –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π endpoint –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ –°–º–µ–Ω–∞ –±—Ä–µ–Ω–¥–∞ –Ω–∞ "Lecto"
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –ë–î –Ω–∞ Supabase PostgreSQL

---

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –í–µ—Ä—Å–∏—è |
|-----------|------------|--------|
| **Backend Framework** | FastAPI | 0.111+ |
| **ORM** | SQLAlchemy (async) | 2.0+ |
| **Database** | PostgreSQL (Supabase) | 15+ |
| **AI** | Google Gemini 2.0 Flash | API |
| **Bot** | python-telegram-bot | 21+ |
| **Scheduler** | APScheduler | 3.10+ |
| **Frontend Framework** | React | 18 |
| **Language** | TypeScript | 5+ |
| **Build Tool** | Vite | 5+ |
| **Styling** | Tailwind CSS | 3+ |
| **State** | Zustand | 4+ |
| **HTTP Client** | Axios | 1+ |
| **Deployment** | Render.com | - |

---

## üîê API Endpoints (–ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫)

### Users
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/api/v1/users/me` | –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |
| GET | `/api/v1/users/me/limits` | –õ–∏–º–∏—Ç—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∞ |
| GET | `/api/v1/users/me/streak` | Streak –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è |

### Materials
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/api/v1/materials/` | –°–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ |
| GET | `/api/v1/materials/{id}` | –î–µ—Ç–∞–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ |
| POST | `/api/v1/materials/upload` | –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª |
| POST | `/api/v1/materials/text` | –°–æ–∑–¥–∞—Ç—å –∏–∑ —Ç–µ–∫—Å—Ç–∞ |
| POST | `/api/v1/materials/scan` | –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (OCR) |
| POST | `/api/v1/materials/generate-from-topic` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–º–µ |
| GET | `/api/v1/materials/search/all` | –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ |
| GET | `/api/v1/materials/group/{group_id}` | –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –≥—Ä—É–ø–ø—ã |
| PATCH | `/api/v1/materials/{id}` | –û–±–Ω–æ–≤–∏—Ç—å (title, folder_id) |
| DELETE | `/api/v1/materials/{id}` | –£–¥–∞–ª–∏—Ç—å |

### Folders
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/api/v1/folders/` | –°–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫ |
| POST | `/api/v1/folders/` | –°–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É |
| DELETE | `/api/v1/folders/{id}` | –£–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É |

### Groups
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/api/v1/groups/` | –ú–æ–∏ –≥—Ä—É–ø–ø—ã |
| POST | `/api/v1/groups/` | –°–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É |
| GET | `/api/v1/groups/{id}` | –î–µ—Ç–∞–ª–∏ –≥—Ä—É–ø–ø—ã |
| POST | `/api/v1/groups/join` | –í—Å—Ç—É–ø–∏—Ç—å –ø–æ –∫–æ–¥—É |
| POST | `/api/v1/groups/{id}/leave` | –ü–æ–∫–∏–Ω—É—Ç—å –≥—Ä—É–ø–ø—É |
| DELETE | `/api/v1/groups/{id}` | –£–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É (owner) |
| GET | `/api/v1/groups/{id}/members` | –£—á–∞—Å—Ç–Ω–∏–∫–∏ |
| POST | `/api/v1/groups/{id}/quiz-result` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞ |
| GET | `/api/v1/groups/{id}/quiz-results` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ (owner) |

### Referrals
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/api/v1/groups/referral/stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤ |
| POST | `/api/v1/groups/referral/generate` | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ |

### Processing
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| POST | `/api/v1/processing/material/{id}` | –û–±—Ä–∞–±–æ—Ç–∞—Ç—å |
| GET | `/api/v1/processing/material/{id}/status` | –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| POST | `/api/v1/processing/material/{id}/regenerate/{format}` | –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç |

### Outputs
| Method | Endpoint | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|----------|
| GET | `/api/v1/outputs/material/{id}` | AI-–≤—ã–≤–æ–¥—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∞ |
| GET | `/api/v1/outputs/{id}` | –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –≤—ã–≤–æ–¥ |

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **Gemini API rate limits** ‚Äî –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –≤–æ–∑–º–æ–∂–Ω—ã 429 –æ—à–∏–±–∫–∏
2. **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤** ‚Äî –º–∞–∫—Å–∏–º—É–º 20 MB
3. **–§–æ—Ä–º–∞—Ç .doc** ‚Äî –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, —Ç–æ–ª—å–∫–æ .docx
4. **–ê—É–¥–∏–æ/–≤–∏–¥–µ–æ** ‚Äî –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (–≤ –ø–ª–∞–Ω–∞—Ö Phase 2)
5. **–ì—Ä—É–ø–ø—ã** ‚Äî –º–∞–∫—Å–∏–º—É–º 50 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (–º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –≤ –º–æ–¥–µ–ª–∏)

---

## üöÄ Deploy

### Backend
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Render.com (Web Service)
- **–¢–∏–ø**: Python 3.11
- **Start Command**: `uvicorn app.main:app --host 0.0.0.0 --port $PORT`
- **Env Variables**: DATABASE_URL, TELEGRAM_BOT_TOKEN, GEMINI_API_KEY, FRONTEND_URL

### Frontend
- **–ë–∏–ª–¥**: `npm run build` ‚Üí `dist/`
- **–î–µ–ø–ª–æ–π**: –ö–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ `backend/static/` –∏ —Ä–∞–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ FastAPI

### Database
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞**: Supabase PostgreSQL
- **Connection**: `postgresql+asyncpg://...pooler.supabase.com:6543/postgres`
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: Alembic

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ | –¶–µ–ª—å |
|---------|------------------|------|
| DAU / MAU | - | –†–æ—Å—Ç |
| Retention D1 | - | > 40% |
| Retention D7 | - | > 20% |
| Retention D30 | - | > 10% |
| Conversion Free ‚Üí Pro | - | 5-10% |
| –ú–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | - | > 3 |

---

## üìû –°–≤—è–∑—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

- **Telegram Bot**: [@lectoaibot](https://t.me/lectoaibot)
- **Support**: @zafarovpolat
- **Repository**: [GitHub](https://github.com/zafarovpolat)

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤—Å–µ–≥–æ –º–∏—Ä–∞**