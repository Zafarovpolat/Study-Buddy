# Lecto - ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ Ğ¾Ğ±Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ¸ Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ

> **ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾**: 2025-12-12  
> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ**: MVP ~99% Ğ³Ğ¾Ñ‚Ğ¾Ğ². Ğ”ĞµĞ¿Ğ»Ğ¾Ğ¹ Ğ½Ğ° Render.com + Supabase PostgreSQL  
> **Ğ’ĞµÑ€ÑĞ¸Ñ**: 0.2.0-beta

---

## ğŸ“Š ĞĞ±Ñ‰Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ

**Lecto** â€” Telegram Mini App Ğ´Ğ»Ñ ÑÑ„Ñ„ĞµĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ ÑƒÑ‡Ñ‘Ğ±Ñ‹ Ñ Ğ¸ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚Ğ¾Ğ¼. Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°Ğ¹ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹ (PDF, DOCX, Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ) â€” Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°Ğ¹ ÑƒĞ¼Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚Ñ‹, Ñ‚ĞµÑÑ‚Ñ‹, ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¸ Ğ³Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ğ¹.

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¸
- **Backend**: Python 3.11 + FastAPI + SQLAlchemy 2.0 (async)
- **Frontend**: React 18 + TypeScript + Vite + Tailwind CSS
- **Database**: PostgreSQL (Supabase) - Session Pooler
- **AI**: Google Gemini 2.0 Flash + text-embedding-004
- **Bot**: python-telegram-bot
- **Deploy**: Render.com

---

## ğŸ“‚ Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

### Backend (`/backend`)

```
backend/
â”œâ”€â”€ alembic/                          # ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ‘Ğ”
â”‚   â”œâ”€â”€ env.py                        # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Alembic
â”‚   â””â”€â”€ versions/
â”‚       â””â”€â”€ 001_initial.py            # ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ (VARCHAR, Ğ±ĞµĞ· ENUM)
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py                       # ğŸš€ Entry point: FastAPI, WebHook, Scheduler
â”‚   â”‚
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â””â”€â”€ config.py                 # ĞŸĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                       # SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (async)
â”‚   â”‚   â”œâ”€â”€ __init__.py               # Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ Ğ²ÑĞµÑ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹
â”‚   â”‚   â”œâ”€â”€ base.py                   # AsyncEngine, SessionLocal, Base
â”‚   â”‚   â”œâ”€â”€ user.py                   # User: Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ°, streak, Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹
â”‚   â”‚   â”œâ”€â”€ material.py               # Material: Ñ„Ğ°Ğ¹Ğ»Ñ‹, OCR, ÑÑ‚Ğ°Ñ‚ÑƒÑ
â”‚   â”‚   â”œâ”€â”€ folder.py                 # Folder: Ğ¿Ğ°Ğ¿ĞºĞ¸ + Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ (is_group=True)
â”‚   â”‚   â”œâ”€â”€ group_member.py           # GroupMember: ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿
â”‚   â”‚   â”œâ”€â”€ ai_output.py              # AIOutput: Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ AI Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸
â”‚   â”‚   â”œâ”€â”€ quiz_result.py            # QuizResult: Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ²
â”‚   â”‚   â””â”€â”€ text_chunk.py             # TextChunk: chunks Ğ´Ğ»Ñ vector search
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ deps.py                   # Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸: get_db, get_current_user
â”‚   â”‚   â”œâ”€â”€ schemas.py                # Pydantic ÑÑ…ĞµĞ¼Ñ‹
â”‚   â”‚   â””â”€â”€ routes/
â”‚   â”‚       â”œâ”€â”€ __init__.py           # api_router
â”‚   â”‚       â”œâ”€â”€ users.py              # /users/*
â”‚   â”‚       â”œâ”€â”€ materials.py          # /materials/*
â”‚   â”‚       â”œâ”€â”€ folders.py            # /folders/*
â”‚   â”‚       â”œâ”€â”€ groups.py             # /groups/*
â”‚   â”‚       â”œâ”€â”€ processing.py         # /processing/*
â”‚   â”‚       â”œâ”€â”€ outputs.py            # /outputs/*
â”‚   â”‚       â””â”€â”€ search.py             # /search/* (RAG, semantic)
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ user_service.py           # ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ, streak, Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹
â”‚   â”‚   â”œâ”€â”€ material_service.py       # CRUD Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ folder_service.py         # CRUD Ğ¿Ğ°Ğ¿Ğ¾Ğº
â”‚   â”‚   â”œâ”€â”€ group_service.py          # Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹, Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ñ‹, leaderboard
â”‚   â”‚   â”œâ”€â”€ ai_service.py             # Gemini API: 5 Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ processing_service.py     # ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ text_extractor.py         # PDF, DOCX, OCR
â”‚   â”‚   â”œâ”€â”€ payment_service.py        # Telegram Stars
â”‚   â”‚   â”œâ”€â”€ notification_service.py   # Push ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
â”‚   â”‚   â”œâ”€â”€ scheduler.py              # APScheduler
â”‚   â”‚   â””â”€â”€ vector_service.py         # RAG: embeddings, semantic search
â”‚   â”‚
â”‚   â””â”€â”€ bot/
â”‚       â”œâ”€â”€ bot.py                    # Telegram bot app
â”‚       â””â”€â”€ handlers.py               # /start, /pro, /stats, /invite
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ reset_db.py                       # Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ‘Ğ”
â””â”€â”€ run_bot.py                        # Polling Ñ€ĞµĞ¶Ğ¸Ğ¼ (dev)
```

### Frontend (`/frontend`)

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.tsx                      # React entry
â”‚   â”œâ”€â”€ App.tsx                       # Router
â”‚   â”œâ”€â”€ index.css                     # Global + Tailwind
â”‚   â”‚
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx              # Ğ’ĞºĞ»Ğ°Ğ´ĞºĞ¸, Ğ¿Ğ¾Ğ¸ÑĞº, breadcrumbs
â”‚   â”‚   â”œâ”€â”€ MaterialPage.tsx          # Ğ”ĞµÑ‚Ğ°Ğ»ÑŒ + AI outputs
â”‚   â”‚   â””â”€â”€ GroupResultsPage.tsx      # Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ² (owner)
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ Header.tsx                # Streak, Ğ±Ğ°Ğ»Ğ°Ğ½Ñ, Ğ¿Ğ¾Ğ¸ÑĞº
â”‚   â”‚   â”œâ”€â”€ MaterialCard.tsx          # ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ°
â”‚   â”‚   â”œâ”€â”€ MaterialActions.tsx       # Ğ ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ, ÑƒĞ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ
â”‚   â”‚   â”œâ”€â”€ UploadModal.tsx           # 5 ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ¾Ğ² Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
â”‚   â”‚   â”œâ”€â”€ OutputViewer.tsx          # AI outputs: Ñ‚ĞµÑÑ‚, ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸...
â”‚   â”‚   â”œâ”€â”€ GroupsTab.tsx             # Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹: ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ, Ğ²ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ
â”‚   â”‚   â”œâ”€â”€ LeaderboardTab.tsx        # ğŸ†• Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ²
â”‚   â”‚   â”œâ”€â”€ OnboardingModal.tsx       # ğŸ†• Ğ¢ÑƒÑ‚Ğ¾Ñ€Ğ¸Ğ°Ğ» (4 ÑĞ»Ğ°Ğ¹Ğ´Ğ°)
â”‚   â”‚   â”œâ”€â”€ AskLibrary.tsx            # ğŸ†• "Ğ¡Ğ¿Ñ€Ğ¾ÑĞ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ" (RAG)
â”‚   â”‚   â”œâ”€â”€ InviteBanner.tsx          # Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ±Ğ°Ğ½Ğ½ĞµÑ€
â”‚   â”‚   â””â”€â”€ ui/                       # Button, Card, Input...
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ api.ts                    # Axios: Ğ²ÑĞµ API Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹
â”‚   â”‚   â””â”€â”€ telegram.ts               # WebApp SDK
â”‚   â”‚
â”‚   â””â”€â”€ store/
â”‚       â””â”€â”€ useStore.ts               # Zustand
â”‚
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ tailwind.config.js
```

---

## âœ… Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

### 1. Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ¾Ğ² âœ…

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | Endpoint | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|---------|----------|--------|
| Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° PDF/DOCX/TXT | `POST /materials/upload` | âœ… |
| Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ (OCR) | `POST /materials/upload` | âœ… |
| Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ğ¼ĞµÑ€Ğ¾Ğ¹ | `POST /materials/scan` | âœ… |
| Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ· Ñ‚ĞµĞºÑÑ‚Ğ° | `POST /materials/text` | âœ… |
| Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‚ĞµĞ¼Ğµ | `POST /materials/generate-from-topic` | âœ… |

### 2. AI ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° (Gemini 2.0 Flash) âœ…

| Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|--------|----------|--------|
| `smart_notes` | Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½ÑĞ¿ĞµĞºÑ‚ | âœ… |
| `tldr` | ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğµ ÑĞ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ | âœ… |
| `quiz` | 15-20 Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² (3 ÑƒÑ€Ğ¾Ğ²Ğ½Ñ) | âœ… |
| `glossary` | Ğ“Ğ»Ğ¾ÑÑĞ°Ñ€Ğ¸Ğ¹ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ğ¾Ğ² | âœ… |
| `flashcards` | ĞšĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸ "Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ-Ğ¾Ñ‚Ğ²ĞµÑ‚" | âœ… |

### 3. ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ AI-ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° âœ…

- **QuizViewer**: Ğ¿Ñ€Ğ¾Ñ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ñ‚ĞµÑÑ‚Ğ° Ñ Ğ±Ğ°Ğ»Ğ»Ğ°Ğ¼Ğ¸, Ğ°Ğ²Ñ‚Ğ¾ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
- **FlashcardsViewer**: flip-ĞºĞ°Ñ€Ñ‚Ğ¾Ñ‡ĞºĞ¸, Ğ¾Ñ‚Ğ¼ĞµÑ‚ĞºĞ° "Ğ·Ğ½Ğ°Ñ"
- **GlossaryViewer**: Ñ€Ğ°ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‰Ğ¸Ğ¹ÑÑ ÑĞ¿Ğ¸ÑĞ¾Ğº
- **MarkdownViewer**: Ñ€ĞµĞ½Ğ´ĞµÑ€ Ñ Ğ¿Ğ¾Ğ´ÑĞ²ĞµÑ‚ĞºĞ¾Ğ¹ ĞºĞ¾Ğ´Ğ°

### 4. Telegram Ğ°Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ âœ…

- WebApp Init Data â†’ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº `X-Telegram-Init-Data`
- Dev-Ñ€ĞµĞ¶Ğ¸Ğ¼: `X-User-ID`
- Deep Links: `/start ref_XXX`, `/start group_XXX`

### 5. ĞœĞ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ âœ…

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|---------|------------|--------|
| Free Ñ‚Ğ°Ñ€Ğ¸Ñ„ (5/Ğ´ĞµĞ½ÑŒ) | `user_service.check_rate_limit()` | âœ… |
| Pro Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° | Telegram Stars | âœ… |
| Pro Ğ·Ğ° 5 Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ¾Ğ² | `group_service._grant_referral_pro()` | âœ… |

**Ğ¦ĞµĞ½Ñ‹**: 1 Ğ¼ĞµÑ = 150â­, 1 Ğ³Ğ¾Ğ´ = 1200â­

### 6. Ğ¡Ğ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ â€” Ğ“Ñ€ÑƒĞ¿Ğ¿Ñ‹ âœ…

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | Endpoint | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|---------|----------|--------|
| Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ | `POST /groups/` | âœ… |
| Ğ’ÑÑ‚ÑƒĞ¿Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ | `POST /groups/join` | âœ… |
| ĞœĞ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ | `GET /materials/group/{id}` | âœ… |
| Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ² | `GET /groups/{id}/quiz-results` | âœ… |
| **Leaderboard** | `GET /groups/{id}/leaderboard` | âœ… ğŸ†• |

### 7. Ğ ĞµÑ„ĞµÑ€Ğ°Ğ»ÑŒĞ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° âœ…

- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ°: 6 ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²
- Ğ¡ÑÑ‹Ğ»ĞºĞ°: `https://t.me/bot?start=ref_CODE`
- ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑÑ-Ğ±Ğ°Ñ€ Ğ² `InviteBanner.tsx`
- ĞŸĞ¾Ñ€Ğ¾Ğ³: 5 Ñ€ĞµÑ„ĞµÑ€Ğ°Ğ»Ğ¾Ğ² = 30 Ğ´Ğ½ĞµĞ¹ Pro

### 8. Streak ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° âœ…

- Ğ¢Ñ€ĞµĞºĞ¸Ğ½Ğ³ Ğ² `user_service._update_streak()`
- ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ² `Header.tsx`
- Ğ¡Ğ±Ñ€Ğ¾Ñ Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾Ğ¿ÑƒÑĞºĞµ 2+ Ğ´Ğ½ĞµĞ¹

### 9. ĞŸĞ¾Ğ¸ÑĞº âœ…

| Ğ¢Ğ¸Ğ¿ | Endpoint | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-----|----------|--------|
| Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ (ILIKE) | `GET /materials/search/all` | âœ… |
| Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ (RAG) | `GET /search/semantic` | âœ… ğŸ†• |
| ĞŸĞ¾Ğ¸ÑĞº Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ | Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€ | âœ… |

### 10. Push ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ âœ…

- Streak Ğ½Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°Ğ½Ğ¸Ñ: 10:00, 19:00
- ĞĞ¾Ğ²Ñ‹Ğµ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹ Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ğµ
- APScheduler: `scheduler.py`

### 11. Vector Search (RAG) âœ… ğŸ†•

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ |
|-----------|------------|--------|
| Chunking | `VectorService._split_into_chunks()` | âœ… |
| Embeddings | Gemini `text-embedding-004` | âœ… |
| Storage | `text_chunks` Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° | âœ… |
| RAG endpoint | `POST /search/ask` | âœ… |
| Semantic search | `GET /search/semantic` | âœ… |
| UI | `AskLibrary.tsx` | âœ… |
| Pro-only | `user.can_use_feature('vector_search')` | âœ… |

### 12. ĞĞ½Ğ±Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ³ âœ… ğŸ†•

- 4 ÑĞ»Ğ°Ğ¹Ğ´Ğ° Ñ Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹
- localStorage: `lecto_onboarding_completed`
- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸: Ğ”Ğ°Ğ»ĞµĞµ, ĞŸÑ€Ğ¾Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ
- Haptic feedback

---

## âš ï¸ ĞŸĞ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

### 1. text_chunks.user_id Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ² Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸

**Ğ¤Ğ°Ğ¹Ğ»**: `alembic/versions/001_initial.py`

```python
# ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚:
sa.Column('material_id', ...)
sa.Column('content', ...)
# ĞĞ•Ğ¢ user_id!

# ĞĞ¾ VectorService Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚:
INSERT INTO text_chunks (material_id, user_id, content, ...)
```

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ**: Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ `user_id` Ğ² Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ»Ğ¸ ÑƒĞ±Ñ€Ğ°Ñ‚ÑŒ Ğ¸Ğ· ÑĞµÑ€Ğ²Ğ¸ÑĞ°.

### 2. pgvector vs ARRAY(Float)

`VectorService` Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ `::vector` cast, Ñ‚Ñ€ĞµĞ±ÑƒÑÑ‰Ğ¸Ğ¹ pgvector extension.

**Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ**: `ARRAY(Float)` â€” Ğ½ĞµÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ Ñ `<=>` Ğ¾Ğ¿ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ¼.

---

## âŒ ĞĞ• Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾

| Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ |
|---------|----------|-----------|
| **AI Debate** | Ğ§Ğ°Ñ‚ Ñ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ¾Ğ¼ (Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº/ÑĞºĞµĞ¿Ñ‚Ğ¸Ğº) | ğŸ”µ Phase 2 |
| **Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ¿Ñ€ĞµĞ·ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ğ¹** | AI ÑĞ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑĞ»Ğ°Ğ¹Ğ´Ñ‹ | ğŸ”µ Phase 2 |
| **ĞÑƒĞ´Ğ¸Ğ¾ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹** | Whisper Ñ‚Ñ€Ğ°Ğ½ÑĞºÑ€Ğ¸Ğ¿Ñ†Ğ¸Ñ | ğŸ”µ Phase 2 |
| **Neuro-Lexicon** | Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸Ğµ (SM-2) | ğŸ”µ Phase 2 |

---

## ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ğ¾ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑĞ¼

```
Backend
â”œâ”€â”€ Users â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Materials â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Folders â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Groups â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Referrals â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Payments â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ AI Processing â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Text Extract â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Bot Handlers â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Notifications â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Scheduler â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â””â”€â”€ Vector Search â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 90% (DB schema issue)

Frontend
â”œâ”€â”€ HomePage â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ MaterialPage â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ UploadModal â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ GroupsTab â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ LeaderboardTab â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% ğŸ†•
â”œâ”€â”€ OnboardingModal â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% ğŸ†•
â”œâ”€â”€ AskLibrary â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% ğŸ†•
â”œâ”€â”€ GroupResults â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ InviteBanner â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ OutputViewer â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â”œâ”€â”€ Search â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%
â””â”€â”€ Header â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%

ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ: ~99%
```

---

## ğŸ” API Endpoints

### Users
| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| GET | `/api/v1/users/me` | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ |
| GET | `/api/v1/users/me/limits` | Ğ›Ğ¸Ğ¼Ğ¸Ñ‚Ñ‹ Ğ¸ Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ° |
| GET | `/api/v1/users/me/streak` | Streak Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ |

### Materials
| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| GET | `/api/v1/materials/` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ¾Ğ² |
| POST | `/api/v1/materials/upload` | Ğ—Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ» |
| POST | `/api/v1/materials/text` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ñ‚ĞµĞºÑÑ‚Ğ° |
| POST | `/api/v1/materials/scan` | OCR ÑĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ |
| POST | `/api/v1/materials/generate-from-topic` | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ¾ Ñ‚ĞµĞ¼Ğµ |
| GET | `/api/v1/materials/search/all` | Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº |

### Groups
| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| GET | `/api/v1/groups/` | ĞœĞ¾Ğ¸ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñ‹ |
| POST | `/api/v1/groups/` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ³Ñ€ÑƒĞ¿Ğ¿Ñƒ |
| POST | `/api/v1/groups/join` | Ğ’ÑÑ‚ÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ ĞºĞ¾Ğ´Ñƒ |
| GET | `/api/v1/groups/{id}/leaderboard` | Ğ ĞµĞ¹Ñ‚Ğ¸Ğ½Ğ³ ÑƒÑ‡Ğ°ÑÑ‚Ğ½Ğ¸ĞºĞ¾Ğ² |
| GET | `/api/v1/groups/{id}/quiz-results` | Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ñ‚ĞµÑÑ‚Ğ¾Ğ² |

### Search (RAG) ğŸ†•
| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| POST | `/api/v1/search/ask` | "Ğ¡Ğ¿Ñ€Ğ¾ÑĞ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ" |
| GET | `/api/v1/search/semantic` | Ğ¡ĞµĞ¼Ğ°Ğ½Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº |
| POST | `/api/v1/search/index/{id}` | ĞŸÑ€Ğ¾Ğ¸Ğ½Ğ´ĞµĞºÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ» |

### Processing
| Method | Endpoint | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|----------|----------|
| POST | `/api/v1/processing/material/{id}` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ |
| POST | `/api/v1/processing/material/{id}/regenerate/{format}` | Ğ ĞµĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ |

---

## ğŸ›  Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ñ | Ğ’ĞµÑ€ÑĞ¸Ñ |
|-----------|------------|--------|
| **Backend** | FastAPI | 0.111+ |
| **ORM** | SQLAlchemy (async) | 2.0+ |
| **Database** | PostgreSQL (Supabase) | 15+ |
| **AI** | Gemini 2.0 Flash | API |
| **Embeddings** | text-embedding-004 | API |
| **Bot** | python-telegram-bot | 21+ |
| **Scheduler** | APScheduler | 3.10+ |
| **Frontend** | React | 18 |
| **State** | Zustand | 4+ |
| **Styling** | Tailwind CSS | 3+ |

---

## ğŸ”„ ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ (Ğ´ĞµĞºĞ°Ğ±Ñ€ÑŒ 2025)

### 2025-12-12
- âœ… Vector Search (RAG) â€” VectorService Ñ embeddings
- âœ… Leaderboard Ğ² Ğ³Ñ€ÑƒĞ¿Ğ¿Ğ°Ñ… â€” LeaderboardTab.tsx
- âœ… ĞĞ½Ğ±Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ³ â€” OnboardingModal.tsx (4 ÑĞ»Ğ°Ğ¹Ğ´Ğ°)
- âœ… AskLibrary â€” UI Ğ´Ğ»Ñ "Ğ¡Ğ¿Ñ€Ğ¾ÑĞ¸ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºÑƒ"
- âœ… ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ ENUM â†’ VARCHAR
- âš ï¸ ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ° Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: text_chunks.user_id

### 2025-12-11
- âœ… Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ°Ğ¼
- âœ… Push ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ
- âœ… ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” Ğ½Ğ° Supabase

---

## ğŸ“ Ğ¡Ğ²ÑĞ·ÑŒ Ğ¸ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

- **Telegram Bot**: [@lectoaibot](https://t.me/lectoaibot)
- **Support**: @zafarovpolat
- **Repository**: [GitHub](https://github.com/zafarovpolat)

---

**Ğ¡Ğ´ĞµĞ»Ğ°Ğ½Ğ¾ Ñ â¤ï¸ Ğ´Ğ»Ñ ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ¾Ğ² Ğ²ÑĞµĞ³Ğ¾ Ğ¼Ğ¸Ñ€Ğ°**